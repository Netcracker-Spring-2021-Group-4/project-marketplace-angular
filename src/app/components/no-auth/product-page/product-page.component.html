<section class="container" *ngIf="!isLoading">
  <div class="wrapper">
    <div>
      <img mat-card-image src={{product.imageUrl}}
           alt="Photo"
           *ngIf="!isLoading || product.imageUrl !== null || product.imageUrl !== undefined"
      >
    </div>
    <div>
      <p class="name">{{product.name}}</p>
      <p class="fw-bold fs-4">{{categoryName | prettyCategory}}</p>
      <div class="price"> <span class="fw-normal">Price: </span>
        <span class="one-price" *ngIf="!discount"> {{product.price | customCurrency}}</span>
        <span class="old-price" *ngIf="discount"> {{product.price | customCurrency}}</span>
        <span class="new-price" *ngIf="discount"> {{discount.offeredPrice | customCurrency}}!</span><br>
      </div>
      <div>
        <p class="date" *ngIf="discount">
          Hurry up, the discount is valid until
          {{ discount.endsAt | date:'medium'}}
        </p>
        <p class="mb-4"> {{product.description}} </p>
        <p class=" mb-4"> Available for purchase:
          <span class="fw-bold">{{product.inStock}} </span>
          items
        </p>

        <div *ngIf="role =='ROLE_NO_AUTH_CUSTOMER' || role == 'ROLE_CUSTOMER'">
          <span class="amount"> Amount </span>
          <input type="number"
                 step="1"
                 value="1"
                 min="0"
                 max="{{availableQuantity}}"
                 (input)="OnInput($event)"
                 (keydown)="OnInput($event)"
          >
        </div>
      </div>
      <div class="action-button">
        <button class="action"
                mat-raised-button color="primary"
                [disabled]="currentValue > availableQuantity || currentValue < 1"
                *ngIf="role =='ROLE_NO_AUTH_CUSTOMER' || role == 'ROLE_CUSTOMER'"
                (click)="addToCart(product.productId)"
        >
          Add to card
        </button>
        <button class="action"
                mat-raised-button color="primary"
                *ngIf="role =='ROLE_NO_AUTH_CUSTOMER' || role == 'ROLE_CUSTOMER'"
        >
          Compare
        </button>
        <div class="editing">
          <button class="action edit"
                  [routerLink]="['./edit']"
                  *ngIf="role =='ROLE_ADMIN' || role == 'ROLE_PRODUCT_MGR'"
                  mat-raised-button color="primary"
          >
            Edit
          </button>
        </div>
      </div>
      <div class="warn">
        <span class="warning" *ngIf="currentValue > product.inStock">
          Sorry now available only {{product.inStock}} items
        </span>
        <span class="warning" *ngIf="currentValue < 1">Add at least one items</span>
        <span class="warning warning-avail" *ngIf="currentValue == product.inStock">
          This is the maximum available amount
        </span>
      </div>

    </div>
  </div>
</section>
